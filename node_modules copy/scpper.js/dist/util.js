"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const apisauce = require("apisauce");
/**
 * API base URL
 */
const BASE_URL = 'http://scpper.com/api/';
/**
 * Create Scpper API
 * @param override override default config
 */
exports.createApi = (override = {}) => apisauce.create(Object.assign({ baseURL: BASE_URL }, override));
/**
 * Throw error if the value is false
 * @param value value
 * @param message message
 */
exports.assert = (value, message) => {
    if (value === false)
        throw new TypeError(message);
};
/**
 * Add request tranformer
 * @param this Scpper instance
 * @param api internal API
 */
function fillRequest(scpper, api) {
    api.addRequestTransform(({ params }) => {
        if (!params.hasOwnProperty('site')) {
            const s = scpper.site;
            if (s)
                params.site = s;
        }
        if (params.site === null)
            delete params.site;
        if (!params.hasOwnProperty('limit'))
            params.limit = scpper.limit;
    });
}
exports.fillRequest = fillRequest;
